{% extends "base.html" %}

{% block content %}
<div class="container py-5">
    <div class="row justify-content-center align-items-start">
        <!-- Thank You -->
        <div class="thank-you col-lg-4 col-md-8 col-sm-12 bg-light p-4 rounded shadow-sm">
            <h4 class="my-4 text-uppercase text-success text-center">
                <strong><i class="fa-solid fa-circle-check me-2"></i>Thank you!</strong>
            </h4>
            <p class="text-center">Your order has been placed.<br>You should shortly receive a confirmation email to <strong>{{ book_order.email }}</strong></p>
            <div class="order-information mt-4 text-center">
                <h6><strong>Order Number</strong></h6>
                <p><strong>#{{ book_order.order_number }}</strong></p>
                <p class="text-muted small">Order Placed: {{ book_order.date }}</p>
            </div>
        </div>

        <!-- Delivery and Billing Details -->
        <div class="col-lg-4 col-md-6 col-sm-12 mt-4 mt-lg-0">
            <div class="delivery-info bg-white p-4 rounded shadow-sm">
                <h5 class="my-4 text-uppercase">
                    <strong><i class="fa-solid fa-truck-fast me-2"></i>Delivery Details</strong>
                </h5>
                <p>{{ book_order.full_name }}</p>
                <p>{{ book_order.street_1 }}</p>
                {% if book_order.street_2 %}
                    <p>{{ book_order.street_2 }}</p>
                {% endif %}
                <p>{{ book_order.town_city }}</p>
                {% if book_order.county %}
                    <p>{{ book_order.county }}</p>
                {% endif %}
                {% if book_order.postcode %}
                    <p>{{ book_order.postcode }}</p>
                {% endif %}
                <p>{{ book_order.country }}</p>
                <div class="billing mt-4">
                    <h5 class="text-uppercase"><strong>Billing Breakdown</strong></h5>
                    <p>Subtotal : €{{ book_order.order_total }}</p>
                    <p>Shipping : {% if book_order.delivery_cost == 0.00 %}<strong>FREE</strong>{% else %}€{{ book_order.delivery_cost }}{% endif %}</p>
                    <p>Total : €{{ book_order.grand_total }}</p>
                </div>
                <a href="{{ home_url }}">
                    <button class="custom-button w-100 mt-4">
                        <i class="fa-solid fa-house-chimney me-2"></i>Home
                    </button>
                </a>
            </div>
        </div>

        <!-- Order Summary -->
        <div class="col-lg-4 col-md-8 col-sm-12">
            <div class="order-summary bg-light p-4 rounded shadow-sm">
                <h5 class="text-uppercase mb-3 text-center"><strong>Order Summary</strong></h5>
                <div class="d-flex justify-content-center" id="order-summary">
                    {% for book in book_order.booklineitem.all %}
                        <div class="book-item bg-white p-3 m-2 rounded shadow-sm text-center" style="width: 200px;">
                            <img src="../../../static/images/1984_cover.jpg" alt="{{ book.book.title }}" class="img-fluid mb-2" style="height: 200px; object-fit: cover;">
                            <p class="h5"><strong>{{ book.book.title }}</strong></p>
                            <p class="text-secondary small">by {{ book.book.author }}</p>
                            <p class="small">Type: {{ book.type }}</p>
                            <p class="small">Amount: {{ book.quantity }}</p>
                        </div>
                    {% endfor %}
                </div>
            </div>
        </div>
        <!-- /Order Summary -->
    </div>
</div>
{% endblock %}
